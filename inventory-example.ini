# Example etcd cluster inventory with Smallstep CA
# 
# Replace x.x.x.x with your actual IP addresses or hostnames
# 
# For production:
#   - Use at least 3 etcd nodes (odd number for quorum)
#   - Configure 2+ cert-managers for HA
#   - Ensure nodes can reach each other on ports 2379 (client) and 2380 (peer)
#   - Ensure cert-manager nodes can be reached on port 9000 (step-ca)

# Etcd cluster nodes (odd number: 3, 5, 7, etc.)
[etcd]
etcd-k8s-1 ansible_host=10.0.1.10
etcd-k8s-2 ansible_host=10.0.1.11
etcd-k8s-3 ansible_host=10.0.1.12

# Optional: Nodes that need client certificates to connect to etcd
# Examples: Kubernetes API servers, monitoring systems, backup tools
[etcd-clients]
kube-apiserver-1 ansible_host=10.0.2.10
kube-apiserver-2 ansible_host=10.0.2.11

# Cert-manager nodes - run step-ca and hold CA keys
# 
# Recommended HA setup:
#   - First node: Primary cert-manager (step-ca RUNNING)
#   - Additional nodes: Backup cert-managers (step-ca STOPPED, CA keys replicated)
# 
# Single cert-manager (development):
#   [etcd-cert-managers]
#   etcd-k8s-1
# 
# HA cert-managers (production):
#   [etcd-cert-managers]
#   etcd-k8s-1  # Primary - step-ca runs here
#   etcd-k8s-2  # Backup - CA keys replicated, ready for failover
[etcd-cert-managers]
etcd-k8s-1  # Primary cert-manager
etcd-k8s-2  # Backup cert-manager (optional but recommended)

# Combined group (do not modify)
[etcd-all:children]
etcd
etcd-clients
