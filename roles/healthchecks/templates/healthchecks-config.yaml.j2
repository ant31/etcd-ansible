# Healthchecks.io configuration
# Generated by Ansible - managed file

# API configuration
api_key: "{{ healthchecks_api_key }}"
api_url: "{{ healthchecks_api_url }}"

# Environment and naming
environment: "{{ healthchecks_environment }}"
name_prefix: "{{ healthchecks_name_prefix }}"
cluster_name: "{{ etcd_cluster_name }}"

# Notification channels
channels: {{ healthchecks_channels | to_json }}

# Check definitions
checks:
{% for check_key, check_config in healthchecks_checks.items() %}
{% if check_config.enabled | default(true) %}
  {{ check_key }}:
    name: "{{ healthchecks_name_prefix }}-{{ etcd_cluster_name }}-{{ check_config.name_suffix }}"
    tags: {{ check_config.tags | default([]) | to_json }}
    desc: "{{ check_config.desc }}"
    timeout: {{ check_config.timeout | default(healthchecks_check_defaults.timeout) }}
    grace: {{ check_config.grace | default(healthchecks_check_defaults.grace) }}
    schedule: "{{ check_config.schedule | default(healthchecks_check_defaults.schedule) }}"
    tz: "{{ check_config.tz | default(healthchecks_check_defaults.tz) }}"
{% endif %}
{% endfor %}
