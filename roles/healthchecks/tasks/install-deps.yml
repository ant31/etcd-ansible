---
# Install Python dependencies for healthchecks.io API

- name: Check if pip3 is available
  command: which pip3
  register: pip3_check
  changed_when: false
  failed_when: false

- name: Install Python dependencies via pip3
  pip:
    name:
      - requests
      - pyyaml
    state: present
    executable: pip3
  when: pip3_check.rc == 0

- name: Install Python dependencies via package manager (fallback)
  package:
    name:
      - python3-requests
      - python3-yaml
    state: present
  when: pip3_check.rc != 0
  failed_when: false
